<!DOCTYPE html>

<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Equi. Expertise Pro</title>
<script src=""></script>
<script type="importmap">{"imports": {"@google/generative-ai": ""}}</script>
</head>
<body class="bg-slate-50 min-h-screen font-sans flex flex-col items-center p-6">

<div class="w-full max-w-md bg-white rounded-[3rem] shadow-2xl p-8 border border-slate-100 text-center">
<h1 class="text-3xl font-black text-slate-800 mb-2">Equi.</h1>
<p class="text-emerald-500 font-bold text-sm mb-8 tracking-widest uppercase">Expertise Radiographique</p>

<input type="file" id="file-input" class="hidden" accept="image/*">

<label for="file-input" class="block w-full py-16 border-4 border-dashed border-slate-100 rounded-[2rem] cursor-pointer hover:bg-emerald-50 hover:border-emerald-200 transition-all">
<span class="text-slate-400 font-medium">Appuyez pour importer la radio</span>
</label>

<div id="preview-area" class="hidden mt-8">
<img id="image-preview" class="w-full rounded-3xl shadow-lg mb-6 max-h-72 object-cover">
<button id="analyze-btn" class="w-full bg-emerald-500 text-white font-black py-5 rounded-2xl shadow-emerald-200 shadow-lg hover:bg-emerald-600 active:scale-95 transition-all">
LANCER L'ANALYSE IA
</button>
</div>

<div id="loading" class="hidden mt-8">
<p class="text-emerald-600 font-bold animate-pulse text-lg">L'intelligence artificielle analyse...</p>
</div>

<div id="result-card" class="hidden mt-8 text-left bg-slate-900 text-emerald-50 p-6 rounded-3xl">
<h3 class="font-bold text-emerald-400 mb-3 border-b border-emerald-900 pb-2">RAPPORT VÉTÉRINAIRE :</h3>
<p id="result-text" class="text-sm leading-relaxed whitespace-pre-wrap"></p>
</div>
</div>

<script type="module">
import { GoogleGenerativeAI } from "@google/generative-ai";

// REMPLACE LE TEXTE ENTRE LES GUILLEMETS PAR TA CLÉ CI-DESSOUS
const API_KEY = "TA_CLE_REELLE_ICI";

const input = document.getElementById('file-input');
const btn = document.getElementById('analyze-btn');
let selectedImg = null;

input.onchange = (e) => {
const reader = new FileReader();
reader.onload = () => {
selectedImg = reader.result;
document.getElementById('image-preview').src = selectedImg;
document.getElementById('preview-area').classList.remove('hidden');
};
reader.readAsDataURL(e.target.files[0]);
};

btn.onclick = async () => {
if(API_KEY === "TA_CLE_REELLE_ICI") { alert("Il manque ta clé API !"); return; }
document.getElementById('loading').classList.remove('hidden');
document.getElementById('preview-area').classList.add('hidden');
try {
const genAI = new GoogleGenerativeAI(API_KEY);
const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });
const base64Data = selectedImg.split(',')[1];
const result = await model.generateContent([
"Agis en expert vétérinaire équin. Analyse cette radio et donne les anomalies.",
{ inlineData: { data: base64Data, mimeType: "image/jpeg" } }
]);
document.getElementById('result-text').innerText = result.response.text();
document.getElementById('result-card').classList.remove('hidden');
} catch (error) {
alert("Erreur : " + error.message);
} finally {
document.getElementById('loading').classList.add('hidden');
}
};
</script>

</body>
</html>
